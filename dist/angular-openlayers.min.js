/*! angular-openlayers - v1.0.0 - 2016-05-09
* http://quentinlampin.github.io/angular-openlayers/
* Copyright (c) 2016 Orange; Licensed MPL-2.0 */
!function(a){var b={};b.name="aol",b.moduleName="angular-openlayers",b.module=angular.module(b.moduleName,[]),b.module.factory(b.name,function(){return{models:b.models,helpers:b.helpers}}),b.log={},b.log.switches={info:!1,debug:!1,warning:!0,error:!0},b.log.info=function(){b.log.switches.info&&console.info(arguments)},b.log.debug=function(){b.log.switches.debug&&console.debug(arguments)},b.log.warning=function(){b.log.switches.warning&&console.warn(arguments)},b.log.error=function(){b.log.switches.error&&console.error(arguments)},b.models={},b.models.Model=function(){this.attributes={},this.typeConverters={},this.watchers={},this.callbacks={}},b.overrides={},b.helpers={},b.Directive=function(){this.name="",this.require=[],this.transclude=!1,this.replace=!1,this.template=a,this.instance=function(){},this.model=function(){},this.onPreInstance=a,this.onParentController=a,this.onParentInstance=a,this.onDestroy=a},b.directives={},b.registerDirective=function(a){var c,d,e,f,g,h,i,j;b.log.info("aol.registerDirective: ",a),c={model:"=?"+b.name+"Model"},d=[a.name],e=a.transclude,f=a.replace,g=a.template,j=new a.model,angular.forEach(j.attributes,function(a,d){c[d]="=?"+b.name+d.charAt(0).toUpperCase()+d.slice(1)}),angular.forEach(a.require,function(a){d.push(a)}),h=function(c,d,e,f){var g=this,h=e.defer(),i={};g.name=a.name,g.getPromise=function(){return h.promise},g.resolvePromise_=function(a){h.resolve(a)},g.setCallbacks=function(a){g.getPromise().then(function(b){g.setCallbacks_(a,b)})},g.setCallbacks_=function(a,c,d,e,h){var j,k;angular.isObject(a)&&(b.log.debug("setting callbacks on ",c,"("+g.name+"): ",a),angular.forEach(a,function(a,b){angular.isFunction(a)&&(k=function(b){f(function(){a(b,c,d,e,h)})},j=c.on(b,k),i[b]=j)}))},g.removeCallbacks_=function(){angular.forEach(i,function(a){ol.Observable.unByKey(a)})},g.setWatchers_=function(a,b,e,f){angular.isObject(a)&&angular.forEach(a,function(a,g){var h,i,j;h=d(g),i=function(){return h(c.model.attributes)},j=function(c,d,g){a(c,d,g,b,e,f)},c.$watch(i,j,!0)})},angular.forEach(j.attributes,function(d,e){var f=e.charAt(0).toUpperCase()+e.slice(1);g["set"+f]=function(d){b.log.debug(a.name+"'s controller method:  set"+f+" called with value: ",d),c[e]=d,angular.isDefined(c.model)&&angular.isDefined(c.model.attributes)&&(c.model.attributes[e]=d)},g["get"+f]=function(){return b.log.debug(a.name+"'s controller method:  get"+f+" called"),angular.isDefined(c.model)&&angular.isDefined(c.model.attributes)?c.model.attributes[e]:c[e]}})},i=function(c,d,e,f){var g,h,i;g=f[0];for(var j=1;j<f.length&&(h=f[j],!angular.isObject(h));j++);angular.isFunction(a.onPreInstance)&&(b.log.debug(a.name+" calling pre instance function: ",a.onPreInstance),a.onPreInstance(c,d,e,f)),angular.isObject(c.model)||(c.model=new a.model),angular.forEach(c.model.attributes,function(a,b){angular.isDefined(c[b])&&(c.model.attributes[b]=c[b],c.$watch(b,function(){c.model.attributes[b]=c[b]}),c.$watch(function(){return c.model.attributes[b]},function(){c.model.attributes[b]!==c[b]&&(c[b]=c.model.attributes[b])}))}),b.log.debug(a.name+" building instance with: ",c.model),i=new a.instance(c.model.attributes),b.log.debug(a.name+" instance: ",i," built with: ",c.model.attributes),g.resolvePromise_(i),g.setCallbacks_(c.model.callbacks,i,g,h,f),g.setWatchers_(c.model.watchers,g,h,f),angular.isFunction(a.onParentController)&&(b.log.debug(a.name+" calling onParentController ",a.onParentController,"on:  ",h),a.onParentController(h,i,f)),angular.isFunction(a.onParentInstance)&&(b.log.debug(a.name+" requiring a promise on: ",h.name),h.getPromise().then(function(c){b.log.debug(a.name+" calling parent instance function: ",a.onParentInstance,"on parentInstance: ",c),a.onParentInstance(c,i,h,f)})),c.$on("$destroy",function(){angular.isFunction(a.onDestroy)&&(b.log.debug(a.name+" requiring a promise on: ",h.name),h.getPromise().then(function(c){b.log.debug(a.name+"calling destroy function: ",a.onDestroy),a.onDestroy(c,i,h,f)})),g.removeCallbacks_()})},b.module.directive(a.name,function(){return{restrict:"E",require:d,transclude:e,replace:f,template:g,scope:c,controller:h,link:i}})},b.models.collections={},b.overrides.collections={},b.helpers.collections={},b.helpers.collections.coordinate={},b.helpers.collections.coordinate.setParentCoordinate=function(a,c,d){var e,f,g,h,i;h=[],f=b.helpers.coordinate.determineMapProjection(d),angular.forEach(c.coordinates,function(a){g=[parseFloat(a.x),parseFloat(a.y)],e=a.projection,i=b.helpers.coordinate.computeProjectedCoordinate(g,e,f),h.push(i)}),a.setCoordinates(h)},b.overrides.collections.Style=function(){function a(a){return a}return a}(),b.overrides.collections.Coordinate=function(){function a(a){return angular.isDefined(a.coordinates)&&(a.coordinates.remove=function(a){this.splice(this.indexOf(a),1)}),a.coordinates}return a}(),b.overrides.collections.Interaction=function(){function a(a){return angular.isDefined(a.interactions)&&(a.interactions.remove=function(a){this.splice(this.indexOf(a),1)}),a.interactions}return a}(),b.overrides.collections.Layer=function(){function a(a){return a.layers.remove=function(a){this.splice(this.indexOf(a),1)},a.layers}return a}(),b.models.collections.Style=function(){b.models.Model.apply(this,arguments),this.attributes.styles=new ol.Collection},b.models.collections.Coordinate=function(){b.models.Model.apply(this,arguments),this.attributes.coordinates=[],this.watchers.coordinates=function(a,c,d,e,f,g){b.helpers.collections.coordinate.setParentCoordinate(f,d.model.attributes,g)}},b.models.collections.Interaction=function(){b.models.Model.apply(this,arguments),this.attributes.interactions=new ol.Collection,this.callbacks.change=a,this.callbacks.add=function(a,b,c,d,e){var f,g;f=e[e.length-1],g=f.getInteractions(),b!==g&&g.push(a.element)},this.callbacks.remove=function(a,b,c,d,e){var f,g;f=e[e.length-1],g=f.getInteractions(),b!==g&&g.remove(a.element)}},b.models.collections.Layer=function(){b.models.Model.apply(this,arguments),this.attributes.layers=new ol.Collection,this.callbacks.change=a,this.callbacks.add=a,this.callbacks.remove=a},b.directives.CollectionStyle=function(){b.Directive.apply(this,arguments),this.name="aolCollectionStyle",this.require=["?^aolFeature","?^aolLayerVector"],this.instance=b.overrides.collections.Style,this.model=b.models.collections.Style,this.onParentInstance=function(a,b){a.setStyle(b)}},b.directives.CollectionCoordinate=function(){b.Directive.apply(this,arguments),this.name="aolCollectionCoordinate",this.require=["?^aolGeometryLinearring","?^aolGeometryLinestring","?^aolGeometryMultipoint","?^aolGeometryPolygon","?^aolView","^^aolMap"],this.instance=b.overrides.collections.Coordinate,this.model=b.models.collections.Coordinate,this.onParentController=function(a,c,d){b.helpers.collections.coordinate.setParentCoordinate(a,c,d)}},b.directives.CollectionInteraction=function(){b.Directive.apply(this,arguments),this.name="aolCollectionInteraction",this.require=["?^aolLayerVector","?^aolCollectionLayer","^aolMap"],this.instance=b.overrides.collections.Interaction,this.model=b.models.collections.Interaction,this.onParentController=function(a,b,c){var d,e;d=c[c.length-1],e=d.getInteractions(),angular.isDefined(e)?e.extend(b):d.setInteractions(b)}},b.directives.CollectionLayer=function(){b.Directive.apply(this,arguments),this.name="aolCollectionLayer",this.require=["^aolMap"],this.instance=b.overrides.collections.Layer,this.model=b.models.collections.Layer,this.onParentInstance=function(a,b){a.getLayers().extend(b.getArray())}},b.registerDirective(new b.directives.CollectionStyle),b.registerDirective(new b.directives.CollectionCoordinate),b.registerDirective(new b.directives.CollectionInteraction),b.registerDirective(new b.directives.CollectionLayer),b.models.Map=function(){b.models.Model.apply(this,arguments),this.attributes.controls=[],this.attributes.interactions=a,this.attributes.layers=a,this.attributes.logo=a,this.attributes.overlays=a,this.attributes.renderer=a,this.attributes.target=a,this.attributes.view=new ol.View({center:[0,0],zoom:1}),this.callbacks.change=a,this.callbacks["change:layerGroup"]=a,this.callbacks["change:size"]=a,this.callbacks["change:target"]=a,this.callbacks["change:view"]=a,this.callbacks.click=a,this.callbacks.dblclick=a,this.callbacks.moveend=a,this.callbacks.pointermove=a,this.callbacks.propertychange=a,this.callbacks.singleclick=a},b.directives.Map=function(){b.Directive.apply(this,arguments),this.name="aolMap",this.transclude=!0,this.replace=!0,this.template='<div class="aol-fill" ng-transclude></div>',this.instance=ol.Map,this.model=b.models.Map,this.onPreInstance=function(a,b){a.target=b[0]}},b.registerDirective(new b.directives.Map),b.models.interactions={},b.helpers.interactions={},b.models.interactions.Select=function(){b.models.Model.apply(this,arguments),this.attributes.addCondition=a,this.attributes.condition=a,this.attributes.layers=a,this.attributes.style=a,this.attributes.removeCondition=a,this.attributes.toggleCondition=a,this.attributes.multi=a,this.attributes.features=a,this.attributes.filter=a,this.attributes.wrapX=a,this.callbacks.change=a,this.callbacks["change:active"]=a,this.callbacks.propertychange=a,this.callbacks.select=a},b.models.interactions.Pointer=function(){b.models.Model.apply(this,arguments),this.attributes.handleDownEvent=a,this.attributes.handleDragEvent=a,this.attributes.handleEvent=a,this.attributes.handleMoveEvent=a,this.attributes.handleUpEvent=a,this.callbacks.change=a,this.callbacks["change:active"]=a,this.callbacks.propertychange=a},b.models.interactions.Translate=function(){b.models.interactions.Pointer.apply(this,arguments),this.attributes.features=a,this.callbacks.change=a,this.callbacks["change:active"]=a,this.callbacks.propertychange=a,this.callbacks.translateend=a,this.callbacks.translatestart=a,this.callbacks.translating=a},b.models.interactions.Defaults=function(){b.models.Model.apply(this,arguments),this.attributes.altShiftDragRotate=a,this.attributes.doubleClickZoom=a,this.attributes.keyboard=a,this.attributes.mouseWheelZoom=a,this.attributes.shiftDragZoom=a,this.attributes.dragPan=a,this.attributes.pinchRotate=a,this.attributes.pinchZoom=a,this.attributes.zoomDelta=a,this.attributes.zoomDuration=a},b.directives.InteractionSelect=function(){b.Directive.apply(this,arguments),this.name="aolInteractionSelect",this.require=["?^aolInteractionTranslate","^aolCollectionInteraction","^?aolLayerVector","^?aolCollectionLayer"],this.replace=!0,this.instance=ol.interaction.Select,this.model=b.models.interactions.Select,this.onParentController=function(a,c,d){var e,f;switch(e=d[2],a.name){case"aolInteractionTranslate":a.setFeatures(c.getFeatures());break;default:b.log.error(this.name+"'s parent is invalid: ",a.name)}e.getPromise().then(function(a){a.push(c)}),d[3]?(f=d[3],f.getPromise().then(function(a){c.layerFilter_=function(b){return b===a}})):d[4]&&(f=d[4],f.getPromise().then(function(a){c.layerFilter_=function(b){return b in a.getArray()}}))},this.onDestroy=function(a,b,c){switch(c.name){case"aolCollectionInteraction":a.remove(b)}}},b.directives.InteractionTranslate=function(){b.Directive.apply(this,arguments),this.name="aolInteractionTranslate",this.require=["^aolCollectionInteraction"],this.replace=!0,this.instance=ol.interaction.Translate,this.model=b.models.interactions.Translate,this.onParentInstance=function(a,b){a.push(b)},this.onDestroy=function(a,b){a.remove(b)}},b.directives.InteractionDefaults=function(){b.Directive.apply(this,arguments),this.name="aolInteractionDefaults",this.require=["^aolCollectionInteraction"],this.replace=!0,this.instance=ol.interaction.defaults,this.model=b.models.interactions.Defaults,this.onParentInstance=function(a,b){b.forEach(function(b){a.push(b)})}},b.registerDirective(new b.directives.InteractionSelect),b.registerDirective(new b.directives.InteractionTranslate),b.registerDirective(new b.directives.InteractionDefaults),b.models.controls={},b.helpers.controls={},b.models.controls.Control=function(){b.models.Model.apply(this,arguments),this.attributes.element=a,this.attributes.render=a,this.attributes.target=a,this.callbacks.change=a,this.callbacks.propertychange=a},b.models.controls.Attribution=function(){b.models.controls.Control.apply(this,arguments),this.attributes.className=a,this.attributes.collapsible=a,this.attributes.collapsed=a,this.attributes.tipLabel=a,this.attributes.label=a,this.attributes.collapseLabel=a},b.models.controls.FullScreen=function(){b.models.controls.Control.apply(this,arguments),this.attributes.className=a,this.attributes.label=a,this.attributes.labelActive=a,this.attributes.tipLabel=a,this.attributes.keys=a},b.models.controls.MousePosition=function(){b.models.controls.Control.apply(this,arguments),this.attributes.className=a,this.attributes.coordinateFormat=a,this.attributes.projection=a,this.attributes.undefinedHTML=a,this.callbacks["change:coordinateFormat"]=a,this.callbacks["change:projection"]=a},b.models.controls.OverviewMap=function(){b.models.controls.Control.apply(this,arguments),this.attributes.collapsed=a,this.attributes.collapseLabel=a,this.attributes.collapsible=a,this.attributes.label=a,this.attributes.layers=a,this.attributes.tipLabel=a},b.models.controls.Rotate=function(){b.models.controls.Control.apply(this,arguments),this.attributes.className=a,this.attributes.label=a,this.attributes.tipLabel=a,this.attributes.duration=a,this.attributes.autoHide=a},b.models.controls.ScaleLine=function(){b.models.controls.Control.apply(this,arguments),this.attributes.className=a,this.attributes.minWidth=a,this.attributes.units=a},b.models.controls.Zoom=function(){b.models.controls.Control.apply(this,arguments),this.attributes.duration=a,this.attributes.className=a,this.attributes.zoomInLabel=a,this.attributes.zoomOutLabel=a,this.attributes.delta=a},b.models.controls.ZoomSlider=function(){b.models.controls.Control.apply(this,arguments),this.attributes.className=a,this.attributes.duration=a,this.attributes.maxResolution=a,this.attributes.minResolution=a},b.models.controls.ZoomToExtent=function(){b.models.controls.Control.apply(this,arguments),this.attributes.className=a,this.attributes.label=a,this.attributes.tipLabel=a,this.attributes.extent=a},b.directives.ControlAttribution=function(){b.Directive.apply(this,arguments),this.name="aolControlAttribution",this.require=["^aolMap"],this.instance=ol.control.Attribution,this.model=b.models.controls.Attribution,this.onParentInstance=function(a,b){a.addControl(b)},this.onDestroy=function(a,b){a.removeControl(b)}},b.directives.ControlFullScreen=function(){b.Directive.apply(this,arguments),this.name="aolControlFullscreen",this.require=["^aolMap"],this.instance=ol.control.FullScreen,this.model=b.models.controls.FullScreen,this.onParentInstance=function(a,b){a.addControl(b)},this.onDestroy=function(a,b){a.removeControl(b)}},b.directives.ControlMousePosition=function(){b.Directive.apply(this,arguments),this.name="aolControlMouseposition",this.require=["^aolMap"],this.instance=ol.control.MousePosition,this.model=b.models.controls.MousePosition,this.onParentInstance=function(a,b){a.addControl(b)},this.onDestroy=function(a,b){a.removeControl(b)}},b.directives.ControlOverviewMap=function(){b.Directive.apply(this,arguments),this.name="aolControlOverviewmap",this.require=["^aolMap"],this.instance=ol.control.OverviewMap,this.model=b.models.controls.OverviewMap,this.onParentInstance=function(a,b){a.addControl(b)},this.onDestroy=function(a,b){a.removeControl(b)}},b.directives.ControlRotate=function(){b.Directive.apply(this,arguments),this.name="aolControlRotate",this.require=["^aolMap"],this.instance=ol.control.Rotate,this.model=b.models.controls.Rotate,this.onParentInstance=function(a,b){a.addControl(b)},this.onDestroy=function(a,b){a.removeControl(b)}},b.directives.ControlScaleLine=function(){b.Directive.apply(this,arguments),this.name="aolControlScaleline",this.require=["^aolMap"],this.instance=ol.control.ScaleLine,this.model=b.models.controls.ScaleLine,this.onParentInstance=function(a,b){a.addControl(b)},this.onDestroy=function(a,b){a.removeControl(b)}},b.directives.ControlZoom=function(){b.Directive.apply(this,arguments),this.name="aolControlZoom",this.require=["^aolMap"],this.instance=ol.control.Zoom,this.model=b.models.controls.Zoom,this.onParentInstance=function(a,b){a.addControl(b)},this.onDestroy=function(a,b){a.removeControl(b)}},b.directives.ControlZoomSlider=function(){b.Directive.apply(this,arguments),this.name="aolControlZoomslider",this.require=["^aolMap"],this.instance=ol.control.ZoomSlider,this.model=b.models.controls.ZoomSlider,this.onParentInstance=function(a,b){a.addControl(b)},this.onDestroy=function(a,b){a.removeControl(b)}},b.directives.ControlZoomToExtent=function(){b.Directive.apply(this,arguments),this.name="aolControlZoomtoextent",this.require=["^aolMap"],this.instance=ol.control.ZoomToExtent,this.model=b.models.controls.ZoomToExtent,this.onParentInstance=function(a,b){a.addControl(b)},this.onDestroy=function(a,b){a.removeControl(b)}},b.registerDirective(new b.directives.ControlAttribution),b.registerDirective(new b.directives.ControlFullScreen),b.registerDirective(new b.directives.ControlMousePosition),b.registerDirective(new b.directives.ControlOverviewMap),b.registerDirective(new b.directives.ControlRotate),b.registerDirective(new b.directives.ControlScaleLine),b.registerDirective(new b.directives.ControlZoom),b.registerDirective(new b.directives.ControlZoomSlider),b.registerDirective(new b.directives.ControlZoomToExtent),b.models.View=function(){b.models.Model.apply(this,arguments),this.attributes.center=[0,0],this.attributes.maxResolution=a,this.attributes.minResolution=a,this.attributes.maxZoom=a,this.attributes.minZoom=a,this.attributes.projection=a,this.attributes.resolution=a,this.attributes.resolutions=a,this.attributes.rotation=a,this.attributes.zoom=2,this.attributes.zoomFactor=a,this.watchers.center=function(a,b,c,d){d.getPromise().then(function(b){b.setCenter(a)})},this.watchers.zoom=function(a,b,c,d){d.getPromise().then(function(b){b.setZoom(a)})},this.callbacks["change:center"]=a,this.callbacks["change:resolution"]=a,this.callbacks["change:rotation"]=a,this.callbacks.propertychange=a},b.directives.View=function(){b.Directive.apply(this,arguments),this.name="aolView",this.require=["^aolMap"],this.instance=ol.View,this.model=b.models.View,this.onParentController=function(a,b){a.setView(b)}},b.registerDirective(new b.directives.View),b.models.layers={},b.helpers.layers={},b.helpers.layers.base={},b.helpers.layers.base.onParentInstance=function(a,c,d){switch(d.name){case"aolCollectionLayer":a.push(c);break;case"aolMap":a.addLayer(c);break;default:b.log.error(this.name+"' parent is invalid: ",d.name)}},b.helpers.layers.base.onDestroy=function(a,c,d){switch(d.name){case"aolCollectionLayer":a.remove(c);break;case"aolMap":a.removeLayer(c);break;default:b.log.error(this.name+"' parent is invalid: ",d.name)}},b.helpers.layers.heatmap={},b.helpers.layers.heatmap.updateRadiusOnRadiusChange=function(a,b,c,d){d.getPromise().then(function(b){b.setRadius(parseFloat(a))})},b.models.layers.Layer=function(){b.models.Model.apply(this,arguments),this.attributes.brightness=a,this.attributes.contrast=a,this.attributes.hue=a,this.attributes.opacity=a,this.attributes.saturation=a,this.attributes.visible=a,this.attributes.extent=a,this.attributes.zIndex=a,this.attributes.minResolution=a,this.attributes.maxResolution=a,this.callbacks.change=a,this.callbacks["change:brightness"]=a,this.callbacks["change:contrast"]=a,this.callbacks["change:extent"]=a,this.callbacks["change:hue"]=a,this.callbacks["change:maxResolution"]=a,this.callbacks["change:minResolution"]=a,this.callbacks["change:opacity"]=a,this.callbacks["change:saturation"]=a,this.callbacks["change:visible"]=a,this.callbacks["change:zIndex"]=a,this.callbacks.propertychange=a},b.models.layers.Heatmap=function(){b.models.layers.Layer.apply(this,arguments),this.attributes.gradient=a,this.attributes.radius=8,this.attributes.blur=a,this.attributes.shadow=a,this.attributes.weight=a,this.attributes.source=a,this.watchers.radius=b.helpers.layers.heatmap.updateRadiusOnRadiusChange,this.callbacks["change:gradient"]=a,this.callbacks["change:blur"]=a,this.callbacks["change:radius"]=a,this.callbacks.postcompose=a,this.callbacks.precompose=a,this.callbacks.propertychange=a,this.callbacks.render=a},b.models.layers.Image=function(){b.models.layers.Layer.apply(this,arguments),this.attributes.source=a,this.attributes.map=a,this.callbacks["change:source"]=a,this.callbacks.postcompose=a,this.callbacks.precompose=a,this.callbacks.propertychange=a,this.callbacks.render=a},b.models.layers.Tile=function(){b.models.layers.Layer.apply(this,arguments),this.attributes.source=a,this.attributes.map=a,this.attributes.preload=a,this.attributes.useInterimTilesOnError=a,this.callbacks["change:source"]=a,this.callbacks["change:preload"]=a,this.callbacks["change:useInterimTilesOnError"]=a,this.callbacks.postcompose=a,this.callbacks.precompose=a,this.callbacks.propertychange=a,this.callbacks.render=a},b.models.layers.Vector=function(){b.models.layers.Layer.apply(this,arguments),this.attributes.renderOrder=a,this.attributes.renderBuffer=a,this.attributes.source=a,this.attributes.style=a,this.attributes.map=a,this.attributes.updateWhileAnimating=a,this.attributes.updateWhileInteracting=a,this.callbacks["change:source"]=a,this.callbacks.postcompose=a,this.callbacks.precompose=a,this.callbacks.propertychange=a,this.callbacks.render=a},b.directives.LayerHeatmap=function(){b.Directive.apply(this,arguments),this.name="aolLayerHeatmap",this.require=["?^aolCollectionLayer","^aolMap"],this.replace=!0,this.instance=ol.layer.Heatmap,this.model=b.models.layers.Heatmap,this.onParentInstance=b.helpers.layers.base.onParentInstance,this.onDestroy=b.helpers.layers.base.onDestroy},b.directives.LayerImage=function(){b.Directive.apply(this,arguments),this.name="aolLayerImage",this.require=["?^aolCollectionLayer","^aolMap"],this.replace=!0,this.instance=ol.layer.Image,this.model=b.models.layers.Image,this.onParentInstance=b.helpers.layers.base.onParentInstance,this.onDestroy=b.helpers.layers.base.onDestroy},b.directives.LayerTile=function(){b.Directive.apply(this,arguments),this.name="aolLayerTile",this.require=["?^aolCollectionLayer","^aolMap"],this.replace=!0,this.instance=ol.layer.Tile,this.model=b.models.layers.Tile,this.onParentInstance=b.helpers.layers.base.onParentInstance,this.onDestroy=b.helpers.layers.base.onDestroy},b.directives.LayerVector=function(){b.Directive.apply(this,arguments),this.name="aolLayerVector",this.require=["?^aolCollectionLayer","^aolMap"],this.replace=!0,this.instance=ol.layer.Vector,this.model=b.models.layers.Vector,this.onParentInstance=b.helpers.layers.base.onParentInstance,this.onDestroy=b.helpers.layers.base.onDestroy},b.registerDirective(new b.directives.LayerHeatmap),b.registerDirective(new b.directives.LayerImage),b.registerDirective(new b.directives.LayerTile),b.registerDirective(new b.directives.LayerVector),b.models.Overlay=function(){b.models.Model.apply(this,arguments),this.attributes.element=a,this.attributes.offset=a,this.attributes.position=a,this.attributes.positioning=a,this.attributes.stopEvent=a,this.attributes.insertFirst=a,this.attributes.autoPan=a,this.attributes.autoPanAnimation=a,this.attributes.autoPanMargin=a,this.watchers.position=function(a,b,c,d){d.getPromise().then(function(b){b.setPosition(a)})},this.callbacks.change=a,this.callbacks["change:element"]=a,this.callbacks["change:map"]=a,this.callbacks["change:offset"]=a,this.callbacks["change:position"]=a,this.callbacks["change:positioning"]=a,this.callbacks.propertychange=a},b.directives.Overlay=function(){b.Directive.apply(this,arguments),this.name="aolOverlay",this.require=["^aolMap"],this.transclude=!0,this.template='<div class="aol-overlay" ng-transclude></div>',this.instance=ol.Overlay,this.model=b.models.Overlay,this.onPreInstance=function(a,b){a.element=b[0].getElementsByClassName("aol-overlay")[0]},this.onParentInstance=function(a,b){a.addOverlay(b)},this.onDestroy=function(a,b){a.removeOverlay(b)}},b.registerDirective(new b.directives.Overlay),b.models.sources={},b.models.sources.TileImage=function(){b.models.Model.apply(this,arguments),this.attributes.attributions=a,this.attributes.crossOrigin=a,this.attributes.logo=a,this.attributes.opaque=a,this.attributes.projection=a,this.attributes.state=a,this.attributes.tileClass=a,this.attributes.tileGrid=a,this.attributes.tileLoadFunction=a,this.attributes.tilePixelRatio=a,this.attributes.tileUrlFunction=a,this.attributes.wrapX=a,this.callbacks.change=a,this.callbacks.propertychange=a,this.callbacks.tileloadend=a,this.callbacks.tileloaderror=a,this.callbacks.tileloadstart=a},b.models.sources.BingMaps=function(){b.models.sources.TileImage.apply(this,arguments),this.attributes.culture=a,this.attributes.key=a,this.attributes.imagerySet=a,this.attributes.maxZoom=a},b.models.sources.TileArcGISRest=function(){b.models.sources.TileImage.apply(this,arguments),this.attributes.params=a,this.attributes.url=a,this.attributes.urls=a},b.models.sources.TileJSON=function(){b.models.sources.TileImage.apply(this,arguments),this.attributes.url=a},b.models.sources.TileWMS=function(){b.models.sources.TileImage.apply(this,arguments),this.attributes.params=a,this.attributes.gutter=a,this.attributes.hidpi=a,this.attributes.maxZoom=a,this.attributes.serverType=a,this.attributes.url=a,this.attributes.urls=a},b.models.sources.WMTS=function(){b.models.sources.TileImage.apply(this,arguments),this.attributes.layer=a,this.attributes.style=a,this.attributes.version=a,this.attributes.format=a,this.attributes.matrixSet=a,this.attributes.dimensions=a,this.attributes.maxZoom=a,this.attributes.url=a,this.attributes.urls=a},b.models.sources.XYZ=function(){b.models.sources.TileImage.apply(this,arguments),this.attributes.maxZoom=a,this.attributes.minZoom=a,this.attributes.url=a,this.attributes.urls=a},b.models.sources.MapQuest=function(){b.models.sources.XYZ.apply(this,arguments),this.attributes.layer="sat"},b.models.sources.OSM=function(){b.models.sources.XYZ.apply(this,arguments),this.attributes.url=a},b.models.sources.Stamen=function(){b.models.sources.XYZ.apply(this,arguments),this.attributes.layer=""},b.models.sources.Zoomify=function(){b.models.sources.TileImage.apply(this,arguments),this.attributes.url=a,this.attributes.tierSizeCalculation=a,this.attributes.size=a},b.models.sources.TileUTFGrid=function(){b.models.Model.apply(this,arguments),this.attributes.preemptive=a,this.attributes.url=a,this.callbacks.change=a,this.callbacks.propertychange=a},b.models.sources.ImageCanvas=function(){b.models.Model.apply(this,arguments),this.attributes.attributions=a,this.attributes.logo=a,this.attributes.projection=a,this.attributes.ratio=a,this.attributes.resolutions=a,this.attributes.state=a,this.callbacks.change=a,this.callbacks.propertychange=a},b.models.sources.ImageVector=function(){b.models.sources.ImageCanvas.apply(this,arguments),this.attributes.source=a,this.attributes.style=a},b.models.sources.ImageMapGuide=function(){b.models.Model.apply(this,arguments),this.attributes.url=a,this.attributes.displayDpi=a,this.attributes.metersPerUnit=a,this.attributes.hidpi=a,this.attributes.useOverlay=a,this.attributes.projection=a,this.attributes.ratio=a,this.attributes.resolutions=a,this.attributes.imageLoadFunction=a,this.attributes.params=a,this.callbacks.change=a,this.callbacks.propertychange=a},b.models.sources.ImageStatic=function(){b.models.Model.apply(this,arguments),this.attributes.attributions=a,this.attributes.crossOrigin=a,this.attributes.imageExtent=a,this.attributes.imageSize=a,this.attributes.imageLoadFunction=a,this.attributes.logo=a,this.attributes.projection=a,this.attributes.url=a,this.callbacks.change=a,this.callbacks.propertychange=a},b.models.sources.ImageWMS=function(){b.models.Model.apply(this,arguments),this.attributes.params=a,this.attributes.crossOrigin=a,this.attributes.hidpi=a,this.attributes.serverType=a,this.attributes.imageLoadFunction=a,this.attributes.logo=a,this.attributes.params=a,this.attributes.projection=a,this.attributes.ratio=a,this.attributes.resolutions=a,this.attributes.url=a,this.callbacks.change=a,this.callbacks.imageloadend=a,this.callbacks.imageloaderror=a,this.callbacks.imageloadstart=a,this.callbacks.propertychange=a},b.models.sources.Raster=function(){b.models.Model.apply(this,arguments),this.attributes.sources=a,this.attributes.operation=a,this.attributes.lib=a,this.attributes.threads=a,this.attributes.operationType=a,this.callbacks.change=a,this.callbacks.propertychange=a},b.models.sources.Vector=function(){b.models.Model.apply(this,arguments),this.attributes.attributions=a,this.attributes.features=a,this.attributes.format=a,this.attributes.loader=a,this.attributes.logo=a,this.attributes.strategy=a,this.attributes.url=a,this.attributes.useSpatialIndex=a,this.attributes.wrapX=a,this.callbacks.addfeature=a,this.callbacks.change=a,this.callbacks.changefeature=a,this.callbacks.clear=a,this.callbacks.propertychange=a,this.callbacks.removefeature=a},b.models.sources.Cluster=function(){b.models.sources.Vector.apply(this,arguments),this.attributes.distance=a,this.attributes.extent=a,this.attributes.projection=a,this.attributes.source=a},b.models.sources.TileVector=function(){b.models.sources.Vector.apply(this,arguments),this.attributes.tileGrid=a,this.attributes.tileLoadFunction=a,this.attributes.url=a,this.attributes.urls=a,this.attributes.wrapX=a},b.directives.SourceBingMaps=function(){b.Directive.apply(this,arguments),this.name="aolSourceBingmaps",this.require=["^aolLayerTile"],this.replace=!0,this.instance=ol.source.BingMaps,this.model=b.models.sources.BingMaps,this.onParentController=function(a,b){a.setSource(b)}},b.directives.SourceTileARCGistRest=function(){b.Directive.apply(this,arguments),this.name="aolSourceTilearcgisrest",this.require=["^aolLayerTile"],this.replace=!0,this.instance=ol.source.TileArcGISRest,this.model=b.models.sources.TileArcGISRest,this.onParentController=function(a,b){a.setSource(b)}},b.directives.SourceTileJSON=function(){b.Directive.apply(this,arguments),this.name="aolSourceTilejson",this.require=["^aolLayerTile"],this.replace=!0,this.instance=ol.source.TileJSON,this.model=b.models.sources.TileJSON,this.onParentController=function(a,b){a.setSource(b)}},b.directives.SourceTileWMS=function(){b.Directive.apply(this,arguments),this.name="aolSourceTilewms",this.require=["^aolLayerTile"],this.replace=!0,this.instance=ol.source.TileWMS,this.model=b.models.sources.TileWMS,this.onParentController=function(a,b){a.setSource(b)}},b.directives.SourceWMTS=function(){b.Directive.apply(this,arguments),this.name="aolSourceTilewms",this.require=["^aolLayerTile"],this.replace=!0,this.instance=ol.source.WMTS,this.model=b.models.sources.WMTS,this.onParentController=function(a,b){a.setSource(b)}},b.directives.SourceXYZ=function(){b.Directive.apply(this,arguments),this.name="aolSourceXyz",this.require=["^aolLayerTile"],this.replace=!0,this.instance=ol.source.XYZ,this.model=b.models.sources.XYZ,this.onParentController=function(a,b){a.setSource(b)}},b.directives.SourceMapQuest=function(){b.Directive.apply(this,arguments),this.name="aolSourceMapquest",this.require=["^aolLayerTile"],this.replace=!0,this.instance=ol.source.MapQuest,this.model=b.models.sources.MapQuest,this.onParentController=function(a,b){a.setSource(b)}},b.directives.SourceOSM=function(){b.Directive.apply(this,arguments),this.name="aolSourceOsm",this.require=["^aolLayerTile"],this.replace=!0,this.instance=ol.source.OSM,this.model=b.models.sources.OSM,this.onParentController=function(a,b){a.setSource(b)}},b.directives.SourceStamen=function(){b.Directive.apply(this,arguments),this.name="aolSourceStamen",this.require=["^aolLayerTile"],this.replace=!0,this.instance=ol.source.Stamen,this.model=b.models.sources.Stamen,this.onParentController=function(a,b){a.setSource(b)}},b.directives.SourceZoomify=function(){
b.Directive.apply(this,arguments),this.name="aolSourceZoomify",this.require=["^aolLayerTile"],this.replace=!0,this.instance=ol.source.Zoomify,this.model=b.models.sources.Zoomify,this.onParentController=function(a,b){a.setSource(b)}},b.directives.SourceTileUTFGrid=function(){b.Directive.apply(this,arguments),this.name="aolSourceTileutfgrid",this.require=["^aolLayerTile"],this.replace=!0,this.instance=ol.source.TileUTFGrid,this.model=b.models.sources.TileUTFGrid,this.onParentController=function(a,b){a.setSource(b)}},b.directives.SourceImageVector=function(){b.Directive.apply(this,arguments),this.name="aolSourceImagevector",this.require=["^aolLayerImage"],this.replace=!0,this.instance=ol.source.ImageVector,this.model=b.models.sources.ImageVector,this.onParentController=function(a,b){a.setSource(b)}},b.directives.SourceImageMapGuide=function(){b.Directive.apply(this,arguments),this.name="aolSourceImagemapguide",this.require=["^aolLayerImage"],this.replace=!0,this.instance=ol.source.ImageVector,this.model=b.models.sources.ImageVector,this.onParentController=function(a,b){a.setSource(b)}},b.directives.SourceImageStatic=function(){b.Directive.apply(this,arguments),this.name="aolSourceImagestatic",this.require=["^aolLayerImage"],this.replace=!0,this.instance=ol.source.ImageStatic,this.model=b.models.sources.ImageStatic,this.onParentController=function(a,b){a.setSource(b)}},b.directives.SourceImageWMS=function(){b.Directive.apply(this,arguments),this.name="aolSourceImagewms",this.require=["^aolLayerImage"],this.replace=!0,this.instance=ol.source.ImageWMS,this.model=b.models.sources.ImageWMS,this.onParentController=function(a,b){a.setSource(b)}},b.directives.SourceRaster=function(){b.Directive.apply(this,arguments),this.name="aolSourceRaster",this.require=["^aolLayerImage"],this.replace=!0,this.instance=ol.source.Raster,this.model=b.models.sources.Raster,this.onParentController=function(a,b){a.setSource(b)}},b.directives.SourceVector=function(){b.Directive.apply(this,arguments),this.name="aolSourceVector",this.require=["?^aolLayerVector","?^aolLayerHeatmap"],this.replace=!0,this.instance=ol.source.Vector,this.model=b.models.sources.Vector,this.onParentController=function(a,b){a.setSource(b)}},b.directives.SourceCluster=function(){b.Directive.apply(this,arguments),this.name="aolSourceCluster",this.require=["^aolLayerVector"],this.replace=!0,this.instance=ol.source.Cluster,this.model=b.models.sources.Cluster,this.onParentController=function(a,b){a.setSource(b)}},b.directives.SourceTileVector=function(){b.Directive.apply(this,arguments),this.name="aolSourceTilevector",this.require=["^aolLayerVector"],this.replace=!0,this.instance=ol.source.TileVector,this.model=b.models.sources.TileVector,this.onParentController=function(a,b){a.setSource(b)}},b.registerDirective(new b.directives.SourceBingMaps),b.registerDirective(new b.directives.SourceTileARCGistRest),b.registerDirective(new b.directives.SourceTileJSON),b.registerDirective(new b.directives.SourceTileWMS),b.registerDirective(new b.directives.SourceWMTS),b.registerDirective(new b.directives.SourceXYZ),b.registerDirective(new b.directives.SourceMapQuest),b.registerDirective(new b.directives.SourceOSM),b.registerDirective(new b.directives.SourceStamen),b.registerDirective(new b.directives.SourceZoomify),b.registerDirective(new b.directives.SourceTileUTFGrid),b.registerDirective(new b.directives.SourceImageVector),b.registerDirective(new b.directives.SourceImageMapGuide),b.registerDirective(new b.directives.SourceImageStatic),b.registerDirective(new b.directives.SourceImageWMS),b.registerDirective(new b.directives.SourceRaster),b.registerDirective(new b.directives.SourceVector),b.registerDirective(new b.directives.SourceCluster),b.registerDirective(new b.directives.SourceTileVector),b.models.Feature=function(){b.models.Model.apply(this,arguments),this.attributes.geometry=a,this.attributes.style=a,this.attributes.properties=a,this.callbacks.change=a,this.callbacks["change:geometry"]=a,this.callbacks["change:style"]=a,this.callbacks["change:id"]=a,this.callbacks.propertychange=a},b.directives.Feature=function(){b.Directive.apply(this,arguments),this.name="aolFeature",this.require=["^aolSourceVector"],this.instance=ol.Feature,this.model=b.models.Feature,this.onParentInstance=function(a,b){a.addFeature(b)},this.onDestroy=function(a,b){a.removeFeature(b)}},b.registerDirective(new b.directives.Feature),b.models.styles={},b.models.styles.Style=function(){b.models.Model.apply(this,arguments),this.attributes.geometry=a,this.attributes.fill=a,this.attributes.image=a,this.attributes.stroke=a,this.attributes.text=a,this.attributes.zIndex=a},b.models.styles.Circle=function(){b.models.Model.apply(this,arguments),this.attributes.fill=a,this.attributes.radius=a,this.attributes.snapToPixel=a,this.attributes.stroke=a},b.models.styles.Fill=function(){b.models.Model.apply(this,arguments),this.attributes.color=a,this.watchers.color=function(b,c,d,e,f,g){var h=g[g.length-1]!==a?g[g.length-1]:g[g.length-2];e.getPromise().then(function(a){a.setColor(b)}),f.getPromise().then(function(a){switch(f.name){case"aolStyleCircle":a.render_()}}),h.getPromise().then(function(a){a.changed()})}},b.models.styles.Icon=function(){b.models.Model.apply(this,arguments),this.attributes.anchor=a,this.attributes.anchorOrigin=a,this.attributes.anchorXUnits=a,this.attributes.anchorYUnits=a,this.attributes.crossOrigin=a,this.attributes.img=a,this.attributes.offset=a,this.attributes.offsetOrigin=a,this.attributes.opacity=a,this.attributes.scale=a,this.attributes.snapToPixel=a,this.attributes.rotateWithView=a,this.attributes.rotation=a,this.attributes.imgSize=a,this.attributes.src=a},b.models.styles.RegularShape=function(){b.models.Model.apply(this,arguments),this.attributes.fill=a,this.attributes.points=a,this.attributes.radius=a,this.attributes.radius1=a,this.attributes.radius2=a,this.attributes.angle=a,this.attributes.snapToPixel=a,this.attributes.stroke=a,this.attributes.rotation=a},b.models.styles.Stroke=function(){b.models.Model.apply(this,arguments),this.attributes.color=a,this.attributes.lineCap=a,this.attributes.lineJoin=a,this.attributes.lineDash=a,this.attributes.miterLimit=a,this.attributes.width=a,this.watchers.color=function(b,c,d,e,f,g){var h=g[g.length-1]!==a?g[g.length-1]:g[g.length-2];e.getPromise().then(function(a){a.setColor(b)}),f.getPromise().then(function(a){switch(f.name){case"aolStyleCircle":a.render_()}}),h.getPromise().then(function(a){a.changed()})}},b.models.styles.Text=function(){b.models.Model.apply(this,arguments),this.attributes.font=a,this.attributes.offsetX=a,this.attributes.offsetY=a,this.attributes.scale=a,this.attributes.rotation=a,this.attributes.text=a,this.attributes.textAlign=a,this.attributes.textBaseline=a,this.attributes.fill=a,this.attributes.stroke=a,this.typeConverters.offsetX=Number,this.typeConverters.offsetY=Number,this.typeConverters.scale=Number,this.typeConverters.rotation=Number},b.directives.Style=function(){b.Directive.apply(this,arguments),this.name="aolStyle",this.require=["?^aolCollectionStyle","?^aolInteractionSelect","?^aolFeature","?^aolLayerVector"],this.instance=ol.style.Style,this.model=b.models.styles.Style,this.onParentController=function(a,b){switch(a.name){case"aolInteractionSelect":a.setStyle(b)}},this.onParentInstance=function(a,b,c){switch(c.name){case"aolCollectionStyle":a.push(b);break;case"aolInteractionSelect":break;default:a.setStyle(b)}},this.onDestroy=function(a,b,c){switch(c.name){case"aolCollectionStyle":a.remove(b);break;case"aolInteractionSelect":break;default:a.setStyle(null)}}},b.directives.StyleCircle=function(){b.Directive.apply(this,arguments),this.name="aolStyleCircle",this.require=["^aolStyle"],this.instance=ol.style.Circle,this.model=b.models.styles.Circle,this.onParentController=function(a,b){a.setImage(b)}},b.directives.StyleFill=function(){b.Directive.apply(this,arguments),this.name="aolStyleFill",this.require=["?^aolStyleText","?^aolStyleCircle","?^aolStyleRegularshape","^aolStyle","?^aolFeature","?^aolLayerVector"],this.instance=ol.style.Fill,this.model=b.models.styles.Fill,this.onParentController=function(a,b){a.setFill(b)}},b.directives.StyleIcon=function(){b.Directive.apply(this,arguments),this.name="aolStyleIcon",this.require=["^aolStyle"],this.instance=ol.style.Icon,this.model=b.models.styles.Icon,this.onParentController=function(a,b){a.setImage(b)}},b.directives.StyleRegularShape=function(){b.Directive.apply(this,arguments),this.name="aolStyleRegularshape",this.require=["^aolStyle"],this.instance=ol.style.RegularShape,this.model=b.models.styles.RegularShape,this.onParentController=function(a,b){a.setImage(b)}},b.directives.StyleStroke=function(){b.Directive.apply(this,arguments),this.name="aolStyleStroke",this.require=["?^aolStyleText","?^aolStyleCircle","?^aolStyleRegularshape","^aolStyle","?^aolFeature","?^aolLayerVector"],this.instance=ol.style.Stroke,this.model=b.models.styles.Stroke,this.onParentController=function(a,b){a.setStroke(b)}},b.directives.StyleText=function(){b.Directive.apply(this,arguments),this.name="aolStyleText",this.require=["^aolStyle"],this.instance=ol.style.Text,this.model=b.models.styles.Text,this.onParentController=function(a,b){a.setText(b)}},b.registerDirective(new b.directives.Style),b.registerDirective(new b.directives.StyleCircle),b.registerDirective(new b.directives.StyleFill),b.registerDirective(new b.directives.StyleIcon),b.registerDirective(new b.directives.StyleRegularShape),b.registerDirective(new b.directives.StyleStroke),b.registerDirective(new b.directives.StyleText),b.models.geometries={},b.helpers.geometries={},b.helpers.geometries.teleportOnCoordinateChange=function(a,b,c,d){d.getPromise().then(function(b){b.setCoordinates(a)})},b.helpers.geometries.slideOnCoordinateChange=function(b,c,d,e,f,g){var h=g[g.length-1];h.getPromise().then(function(c){e.getPromise().then(function(e){function f(b){l=Math.min(1,(b.frameState.time-h)/g),m=n(l),k[0]=i[0]+m*j[0],k[1]=i[1]+m*j[1],e.setCoordinates(k),1===l?(ol.Observable.unByKey(d.__listenerId__),d.__listenerId__=a,b.frameState.animate=!1):b.frameState.animate=!0}var g=350,h=(new Date).getTime(),i=e.getCoordinates(),j=[b[0]-i[0],b[1]-i[1]],k=[i[0],i[1]],l=0,m=0,n=ol.easing.inAndOut;angular.isDefined(d.__listenerId__)&&(ol.Observable.unByKey(d.__listenerId__),d.__listenerId__=a),d.__listenerId__=c.on("postcompose",f),c.render()})})},b.overrides.geometries={},b.overrides.geometries.Circle=function(a){return new ol.geom.Circle(a.center,a.radius,a.layout)},b.overrides.geometries.LinearRing=function(a){return new ol.geom.LinearRing(a.coordinates,a.layout)},b.overrides.geometries.LineString=function(a){return new ol.geom.LineString(a.coordinates,a.layout)},b.overrides.geometries.MultiLineString=function(a){return new ol.geom.MultiLineString(a.coordinates,a.layout)},b.overrides.geometries.MultiPoint=function(a){return new ol.geom.MultiPoint(a.coordinates,a.layout)},b.overrides.geometries.MultiPolygon=function(a){return new ol.geom.MultiPolygon(a.coordinates,a.layout)},b.overrides.geometries.Point=function(a){return new ol.geom.Point(a.coordinates,a.layout)},b.overrides.geometries.Polygon=function(a){return new ol.geom.Polygon(a.coordinates,a.layout)},b.models.geometries.SimpleGeometry=function(){b.models.Model.apply(this,arguments),this.watchers.coordinates=b.helpers.geometries.teleportOnCoordinateChange,this.callbacks.change=a,this.callbacks.propertychange=a},b.models.geometries.Circle=function(){b.models.geometries.SimpleGeometry.apply(this,arguments),this.attributes.center=a,this.attributes.radius=a,this.attributes.layout=a},b.models.geometries.LinearRing=function(){b.models.geometries.SimpleGeometry.apply(this,arguments),this.attributes.coordinates=a,this.attributes.layout=a},b.models.geometries.LineString=function(){b.models.geometries.SimpleGeometry.apply(this,arguments),this.attributes.coordinates=a,this.attributes.layout=a},b.models.geometries.MultiLineString=function(){b.models.geometries.SimpleGeometry.apply(this,arguments),this.attributes.coordinates=a,this.attributes.layout=a},b.models.geometries.MultiPoint=function(){b.models.geometries.SimpleGeometry.apply(this,arguments),this.attributes.coordinates=a,this.attributes.layout=a},b.models.geometries.MultiPolygon=function(){b.models.geometries.SimpleGeometry.apply(this,arguments),this.attributes.coordinates=a,this.attributes.layout=a},b.models.geometries.Point=function(){b.models.geometries.SimpleGeometry.apply(this,arguments),this.attributes.coordinates=a,this.attributes.layout=a},b.models.geometries.Polygon=function(){b.models.geometries.SimpleGeometry.apply(this,arguments),this.attributes.coordinates=a,this.attributes.layout=a},b.directives.GeometryCircle=function(){b.Directive.apply(this,arguments),this.name="aolGeometryCircle",this.require=["?^aolFeature","?^aolStyle","^^aolMap"],this.instance=b.overrides.geometries.Circle,this.model=b.models.geometries.Circle,this.onParentController=function(a,b){a.setGeometry(b)}},b.directives.GeometryLinearRing=function(){b.Directive.apply(this,arguments),this.name="aolGeometryLinearring",this.require=["?^aolFeature","?^aolStyle","^^aolMap"],this.instance=b.overrides.geometries.LinearRing,this.model=b.models.geometries.LinearRing,this.onParentController=function(a,b){a.setGeometry(b)}},b.directives.GeometryLineString=function(){b.Directive.apply(this,arguments),this.name="aolGeometryLinestring",this.require=["?^aolFeature","?^aolStyle","^^aolMap"],this.instance=b.overrides.geometries.LineString,this.model=b.models.geometries.LineString,this.onParentController=function(a,b){a.setGeometry(b)}},b.directives.GeometryMultiLineString=function(){b.Directive.apply(this,arguments),this.name="aolGeometryMultilinestring",this.require=["?^aolFeature","?^aolStyle","^^aolMap"],this.instance=b.overrides.geometries.MultiLineString,this.model=b.models.geometries.MultiLineString,this.onParentController=function(a,b){a.setGeometry(b)}},b.directives.GeometryMultiPoint=function(){b.Directive.apply(this,arguments),this.name="aolGeometryMultipoint",this.require=["?^aolFeature","?^aolStyle","^^aolMap"],this.instance=b.overrides.geometries.MultiPoint,this.model=b.models.geometries.MultiPoint,this.onParentController=function(a,b){a.setGeometry(b)}},b.directives.GeometryMultiPolygon=function(){b.Directive.apply(this,arguments),this.name="aolGeometryMultipolygon",this.require=["?^aolFeature","?^aolStyle","^^aolMap"],this.instance=b.overrides.geometries.MultiPolygon,this.model=b.models.geometries.MultiPolygon,this.onParentController=function(a,b){a.setGeometry(b)}},b.directives.GeometryPoint=function(){b.Directive.apply(this,arguments),this.name="aolGeometryPoint",this.require=["?^aolFeature","?^aolStyle","^^aolMap"],this.instance=b.overrides.geometries.Point,this.model=b.models.geometries.Point,this.onParentController=function(a,b){a.setGeometry(b)}},b.directives.GeometryPolygon=function(){b.Directive.apply(this,arguments),this.name="aolGeometryPolygon",this.require=["?^aolFeature","?^aolStyle","^^aolMap"],this.instance=b.overrides.geometries.Polygon,this.model=b.models.geometries.Polygon,this.onParentController=function(a,b){a.setGeometry(b)}},b.registerDirective(new b.directives.GeometryCircle),b.registerDirective(new b.directives.GeometryLinearRing),b.registerDirective(new b.directives.GeometryLineString),b.registerDirective(new b.directives.GeometryMultiLineString),b.registerDirective(new b.directives.GeometryMultiPoint),b.registerDirective(new b.directives.GeometryMultiPolygon),b.registerDirective(new b.directives.GeometryPoint),b.registerDirective(new b.directives.GeometryPolygon),b.models.Projection=function(){b.models.Model.apply(this,arguments),this.attributes.code=a,this.attributes.units=a,this.attributes.extent=a,this.attributes.axisOrientation=a,this.attributes.global=a,this.attributes.worldExtent=a,this.attributes.getPointResolution=a},b.directives.Projection=function(){b.Directive.apply(this,arguments),this.name="aolProjection",this.require=["?^aolCoordinate","?^aolSourceCluster","?^aolSourceImagecanvas","?^aolSourceImagemapguide","?^aolSourceImagemapguide","?^aolSourceImagestatic","?^aolSourceImagevector","?^aolSourceImagewms","?^aolSourceTilearcgisrest","?^aolSourceTileimage","?^aolSourceTilewms","?^aolSourceWmts","?^aolSourceXyz","?^aolView","?^aolControlMouseposition"],this.instance=ol.proj.Projection,this.model=b.models.Projection,this.onParentController=function(a,b){a.setProjection(b)}},b.registerDirective(new b.directives.Projection),b.helpers.coordinate={},b.helpers.coordinate.determineMapProjection=function(b){var c,d;return c=b[b.length-1],d=c.getView(),angular.isObject(d)?d.getProjection():a},b.helpers.coordinate.updateCoordinate=function(a,c){switch(a.name){case"aolGeometryCircle":a.setCenter(c);break;case"aolGeometryPoint":a.setCoordinates(c);break;case"aolOverlay":a.setPosition(c);break;case"aolView":a.setCenter(c);break;case"aolCollectionCoordinate":break;default:b.log.error("aol.helpers.coordinate.update on "+a.name+" unsupported")}},b.helpers.coordinate.computeProjectedCoordinate=function(a,b,c){var d,e,f;return d=angular.isDefined(b)?b.getCode():"EPSG:3857",e=angular.isDefined(c)?c.getCode():"EPSG:3857",f=d!==e?ol.proj.transform(a,d,e):a},b.helpers.coordinate.setParentCoordinate=function(a,c,d){var e,f,g,h;g=[parseFloat(c.x),parseFloat(c.y)],e=c.projection,f=b.helpers.coordinate.determineMapProjection(d),h=b.helpers.coordinate.computeProjectedCoordinate(g,e,f),b.helpers.coordinate.updateCoordinate(a,h)},b.helpers.coordinate.onParentController=function(a,c,d){var e;switch(b.helpers.coordinate.setParentCoordinate(a,c,d),a.name){case"aolGeometryPoint":e=function(a){var e,f,g;e=c.projection,f=b.helpers.coordinate.determineMapProjection(d),g=b.helpers.coordinate.computeProjectedCoordinate(a.target.getCoordinates(),f,e),c.x=g[0],c.y=g[1]},a.setCallbacks({change:e});break;case"aolView":e=function(a){var e,f,g;e=c.projection,f=b.helpers.coordinate.determineMapProjection(d),g=b.helpers.coordinate.computeProjectedCoordinate(a.target.getCenter(),f,e),c.x=g[0],c.y=g[1]},a.setCallbacks({"change:center":e})}},b.helpers.coordinate.updateParentOnModelChange=function(a,c,d,e,f,g){b.helpers.coordinate.setParentCoordinate(f,d.model.attributes,g)},b.overrides.coordinate={},b.overrides.coordinate.Coordinate=function(){function a(a){return a}return a}(),b.models.Coordinate=function(){b.models.Model.apply(this,arguments),this.attributes.x=a,this.attributes.y=a,this.attributes.projection=a,this.typeConverters.x=Number,this.typeConverters.y=Number,this.watchers["[x,y]"]=b.helpers.coordinate.updateParentOnModelChange},b.directives.Coordinate=function(){b.Directive.apply(this,arguments),this.name="aolCoordinate",this.require=["?^aolCollectionCoordinate","?^aolGeometryCircle","?^aolGeometryLinearring","?^aolGeometryLinestring","?^aolGeometryMultilinestring","?^aolGeometryMultipoint","?^aolGeometryPoint","?^aolGeometryPolygon","?^aolOverlay","?^aolView","^^aolMap"],this.instance=b.overrides.coordinate.Coordinate,this.model=b.models.Coordinate,this.onParentController=b.helpers.coordinate.onParentController,this.onParentInstance=function(a,b,c){switch(c.name){case"aolCollectionCoordinate":a.push(b);break;case"aolGeometryPoint":}},this.onDestroy=function(a,b,c){switch(c.name){case"aolCollectionCoordinate":a.remove(b)}}},b.registerDirective(new b.directives.Coordinate),"function"==typeof define&&"object"==typeof define.amd?define(function(a){a.aol=b}):window.aol=b}();